plugins {
    id 'java'
    id 'scala'
    id 'groovy'
    id 'idea'
    id 'maven'
//    id 'com.github.johnrengelman.shadow' // version '4.0.2'
}
group 'oliv.scratch.pad'
version '0.0.1-SNAPSHOT'

//apply plugin: 'groovy'
//apply plugin: 'java'
//apply plugin: 'scala'
////apply plugin: "nebula.clojure"
//apply plugin: 'com.github.johnrengelman.shadow' // version '4.0.2'

// sourceCompatibility = 1.8

repositories {
    mavenCentral()
    mavenLocal()
    maven { url "https://www.datanucleus.org/downloads/maven2" }
    // maven { url "https://nexus.corp.com/content/repositories/releases" }
    maven { url "https://mvnrepository.com/artifact" }
    maven { url "https://dl.bintray.com/cibotech/public" }
    maven { url "https://raw.githubusercontent.com/OlivierLD/raspberry-coffee/repository" }
}

dependencies {
    compile 'org.scala-lang:scala-library:2.12.3'
    compile "org.scala-lang:scala-compiler:2.12.3"
    compile 'com.typesafe.akka:akka-actor_2.11:2.3.11'
    compile 'org.codehaus.groovy:groovy-all:2.3.11'
    compile 'org.knowm.xchart:xchart:3.5.4'
    compile 'javax.interceptor:javax.interceptor-api:1.2.2'
    compile 'org.yaml:snakeyaml:1.21'
    compile 'oracle:xmlparser:2.0'
    // https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind
    compile 'com.fasterxml.jackson.core:jackson-databind:2.11.2'
    // ScalaJS
    compile 'org.scala-js:scalajs-dom_sjs1_2.13:1.1.0'
    compile 'org.scala-js:scalajs-library_2.13:1.2.0'
    // EvilPlot
//    compile 'com.cibo:evilplot-repl_2.12:0.7.0'
//    compile 'com.cibo:evilplot-repl_2.13:0.8.0'

//    compile project(':common-utils')
    implementation 'oliv.raspi.coffee:common-utils:1.0' // Java Celestial Almanac
    // compile project(':system-utils') // Speech Stuff
    implementation group: 'org.xerial', name: 'sqlite-jdbc', version: '3.34.0'

    // https://mvnrepository.com/artifact/org.apache.calcite/calcite-core
    implementation group: 'org.apache.calcite', name: 'calcite-core', version: '1.26.0'

    implementation group: 'com.jayway.jsonpath', name: 'json-path', version: '2.4.0'

    // Require tools.jar, from the JDK (Doclet and Co)
//    compile files(org.gradle.internal.jvm.Jvm.current().toolsJar)
    compile files("${System.getProperty('java.home')}/../lib/tools.jar")
    testCompile group: 'junit', name: 'junit', version: '4.13'
}

task SQLiteTest(type: JavaExec, dependsOn: classes, description: 'Runs a SQLite sample') {
    main = 'sqlite.Sample102'
    classpath sourceSets.main.runtimeClasspath
    classpath configurations.runtime
}

task SQLiteBLOBTest(type: JavaExec, dependsOn: classes, description: 'Runs a SQLite sample') {
    main = 'sqlite.SampleBLOB'
    classpath sourceSets.main.runtimeClasspath
    classpath configurations.runtime
}

build.doFirst {
    println "-------------------------------------------------------"
    println ">>> Using JAVA_HOME: ${System.getProperty('java.home')}"
    println "-------------------------------------------------------"
}

//shadowJar {
//    zip64 true
//}
