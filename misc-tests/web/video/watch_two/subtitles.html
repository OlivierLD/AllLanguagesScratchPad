<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Video Subtitle Test 1</title>
    <style>
* {
    font-family: 'Courier New', Courier, monospace;
}
    </style>
</head>
<body>

<!--
 | Uses a mp4, converted from youtube with https://y2mate.tools/en/youtube-mp4
 -->

<h1>Subtitles Tests - Dynamically set</h1>
<h4>Use the kebab at the bottom right of the video to display subtitles</h4>
<div>
    <video id="video" preload="metadata" controls>
        <source src="../TCP_Watch_at_work.mp4" type="video/mp4">
        <!--track label="English" kind="subtitles" srclang="en" src="watch-en.vtt">
        <track label="French" kind="subtitles" srclang="fr" src="watch-fr.vtt" default=""-->
    </video>
</div>


</body>
<script>
    const enSubtitles = [
        { from:0.000, to:2.000, text:'Default screen, index 0' },
        { from:3.000, to:4.000, text:'Use top button...' },
        { from:4.500, to:7.000, text:'Press it again, screen 3' },
        { from:7.200, to:10.000, text:'Keep going this way' },
        { from:10.100, to:14.000, text:'Etc, etc!' },
        { from:14.100, to:35.000, text:'And so on, until the end' }
    ];
    const frSubtitles = [
        { from:0.000, to:2.000, text:'Écran par défaut, index 0' },
        { from:3.000, to:4.000, text:'Utilisez le bouton du dessus...' },
        { from:4.500, to:7.000, text:'Appuyez encore, écran 3' },
        { from:7.200, to:10.000, text:'Continuez comme ça' },
        { from:10.100, to:14.000, text:'Etc, etc!' },
        { from:14.100, to:35.000, text:'Et ainsi de suite, jusqu\'à la fin' }
    ];

    function addTextTrack(elementId, type, label, lang, textData, show) {
        let videoEl = document.getElementById(elementId);
        // See https://www.w3schools.com/tags/av_met_addtexttrack.asp
        // See https://developer.mozilla.org/en-US/docs/Web/API/TextTrack/addCue
        let textTrack = videoEl.addTextTrack(type, label, lang);
        if (show) {
            textTrack.mode = "showing";
        }
        textData.forEach(txt => {
            textTrack.addCue(new VTTCue(txt.from, txt.to, txt.text));
        });
    }

    window.onload = () => {
        addTextTrack('video', 'subtitles', 'English', 'en', enSubtitles, true);
        addTextTrack('video', 'subtitles', 'Français', 'fr', frSubtitles);
    };

</script>
</html>